/*! szig-embed v1.3.0 2017-06-12T10:36:36.634Z */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){!function(){"use strict";i(1).bootstrap()}()},function(t,e,i){"use strict";var n=i(2),r=i(3),s=i(4),o=i(6),a=i(5),c=i(7),l="ready";window.szigEmbed=Function.prototype;var d=n.call({READY_EVENT:l,$iFrame:null,$script:null,targetUrl:"",tasks:{"update:height":function(t,e){"string"==typeof t.height&&(e.$iFrame.style.height=t.height,setTimeout(function(){c(e.$iFrame,"end","szig-embed")},1))},"get:config":function(t,e){e.sendTask("update:config",e.config)}},config:{panorama:!1,verticalPadding:!0,horizontalPadding:!0,contentLeft:0,initialHeight:0,pagefile:"index.html",disableMEWPadding:!1},bootstrap:function(t){return t=t||"szigEmbed",window[t]=function(){d.embed(this)},this},embed:function(t){function e(){if(i!==!0){i=!0,window.addEventListener("message",function(t){t.source===d.$iFrame.contentWindow&&d.processMessage(t.data)},!1);var t=d.$script,e=document.createElement("iframe");e.setAttribute("data-config",t.getAttribute("data-config")),e.style.border="none",e.style.width="100%",e.style.height=d.config.initialHeight||0,e.src=d.targetUrl,d.$iFrame=e,s.applyIFrameContext(t.parentNode,e,d.config),t.parentNode.insertBefore(e,t),d.notify(l,d)}}var i=!1;this.$script=t,this.config.channel=t.getAttribute("data-channel")||"www";var n=/api.*sueddeutsche/.test(window.location.hostname),r=window.navigator.userAgent.toLowerCase(),a=/iphone|ipod|ipad/.test(r)===!0&&/safari/.test(r)===!1&&window.navigator.standalone===!1;return"mobile"===this.config.channel&&(n||a)&&(this.config.channel="app"),this.setConfig(o(t.getAttribute("data-config")),this.config),this.targetUrl=t.getAttribute("src").replace(/[^\/]*\/?$/,this.config.pagefile),window.addEventListener("DOMContentLoaded",e,!1),"loading"!==document.readyState&&e(),this},setConfig:function(t){return this.config=a(t,this.config),this},sendTask:function(t,e){return this.$iFrame.contentWindow.postMessage(JSON.stringify({type:t,data:e}),"*"),this},processMessage:function(t){var e=r.parseString(t);return e&&this.runTask(e),this},registerTask:function(t,e){return this.tasks[t]=e,this},runTask:function(t){var e=t.type;return this.tasks[e]&&this.tasks[e](t,this),this}},[l]);t.exports=d},function(t,e){"use strict";function i(){var t,e,i,n=Array.prototype.shift.apply(arguments);if(null==this.observers[n])throw new Error("Unknown event "+n+" for observable ("+Object.keys(this.observers).join(",")+")");if(0===this.observers[n].length)return!1;for(i=this.observers[n],t=0,e=i.length;t<e;t+=1)i[t].apply(i[t],arguments);return!0}function n(t,e){if(null==this.observers[t])throw new Error("Invalid event "+t+" for observable");return"function"==typeof e&&this.observers[t].push(e),this}function r(t,e){null!=this.observers[t]&&(this.observers[t]=this.observers[t].filter(function(t){return t!==e}))}function s(t,e){var i=this;return n.call(this,t,function s(){r.call(i,t,s),e.apply(this,arguments)})}function o(t){if(Array.isArray(t))o.apply(this,t);else for(var e=0,i=arguments.length;e<i;e+=1)this[arguments[e]]=[]}function a(t){var e={};if(0===arguments.length||0===t.length)throw new Error("Missing eventList for observable");for(var a=0,c=arguments.length;a<c;a+=1)o.call(e,arguments[a]);return this.observers=e,this.addObserver=n,this.addObserverOnce=s,this.removeObserver=r,this.notify=i,this}a.dispose=function(){delete this.observers,delete this.addObserver,delete this.addObserverOnce,delete this.removeObserver,delete this.notify},t.exports=a},function(t,e){"use strict";function i(t){var e;try{e=JSON.parse(t)}catch(i){return""}return"[object Object]"!==Object.prototype.toString.call(e)?"":"string"!=typeof e.type?"":e}t.exports={parseString:i}},function(t,e,i){"use strict";function n(t){var e="mobile"===t.channel,i="www"===t.channel,n="app"===t.channel,r="tablet"===t.channel,s=r&&(!window.location.protocol||0!==window.location.protocol.indexOf("http")),a=(i||e)&&("/"===window.location.pathname||""===window.location.pathname);return e&&/api.*sueddeutsche/.test(window.location.hostname)&&(e=!1,n=!0),o({isWWW:i,isMEW:e,isApp:n,isTablet:r,isTabletApp:s,isDesktopArticle:i&&!a,isMobileArticle:e&&!a,isHomepage:a,panorama:i&&t.panorama},t)}function r(t,e){t.classList.add("include"),t.classList.add("panorama"),t.style.backgroundColor="transparent",e.style.position="relative"}function s(t,e,i){null!=t&&(e.style.overflow="hidden",i=n(i),i.isTablet||(t.style.lineHeight=0,e.classList.add("body")),i.panorama&&i.isDesktopArticle&&(r(t,e),t.style.boxSizing="border-box",i.contentLeft=-c,i.horizontalPadding===!0?(t.style.paddingLeft=a+"px",t.style.paddingRight=a+"px",i.contentLeft-=a):(t.style.paddingLeft=0,t.style.paddingRight=0)),i.horizontalPadding===!0&&(e.style.boxSizing="border-box"),i.isMobileArticle&&i.verticalPadding&&t.classList.add("include"),i.isMEW&&i.disableMEWPadding&&(e.style.paddingLeft="0",e.style.paddingRight="0"),(i.horizontalPadding||i.verticalPadding)&&(i.isApp&&t.classList.add("basicBoundary"),i.isApp&&i.horizontalPadding===!1&&(t.style.marginLeft=0,t.style.marginRight=0),i.isApp&&i.verticalPadding===!1&&(t.style.marginTop=0,t.style.marginBottom=0)))}var o=i(5),a=14,c=-120;t.exports={addContextVariables:n,applyIFrameContext:s}},function(t,e){"use strict";t.exports=function(t,e){t=t||{},e=e||{};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}},function(module,exports){"use strict";module.exports=function parseConfig(jsString){var appConfig;try{if(/^\s*\{.*\}\s*$/.test(jsString)===!1)return{};if(2!==jsString.match(/[\{\}\{]/g).length)return{};appConfig=eval("("+jsString+")")}catch(e){appConfig={}}return appConfig}},function(t,e){"use strict";t.exports=function(t,e,i,n){n="[object Object]"===Object.prototype.toString.call(n)?n:{},n.source=e,i="update"===i?"viewport:update":"viewport:end";var r;try{r=new CustomEvent(i,{detail:n,cancelable:!0,bubbles:!0})}catch(s){var r=document.createEvent("CustomEvent");r.state=n,r.initEvent(i,!0,!0)}t.dispatchEvent(r)}}])});
